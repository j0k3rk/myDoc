<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.10">
<title>Python</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700">
<style>
/* Asciidoctor default stylesheet | MIT License | https://asciidoctor.org */
/* Uncomment @import statement to use as custom stylesheet */
/*@import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700";*/
article,aside,details,figcaption,figure,footer,header,hgroup,main,nav,section{display:block}
audio,video{display:inline-block}
audio:not([controls]){display:none;height:0}
html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}
a{background:none}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
abbr[title]{border-bottom:1px dotted}
b,strong{font-weight:bold}
dfn{font-style:italic}
hr{-moz-box-sizing:content-box;box-sizing:content-box;height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:monospace;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type="button"],input[type="reset"],input[type="submit"]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type="checkbox"],input[type="radio"]{box-sizing:border-box;padding:0}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,*::before,*::after{-moz-box-sizing:border-box;-webkit-box-sizing:border-box;box-sizing:border-box}
html,body{font-size:100%}
body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;font-weight:400;font-style:normal;line-height:1;position:relative;cursor:auto;tab-size:4;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
img,object,svg{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
.center{margin-left:auto;margin-right:auto}
.stretch{width:100%}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0;direction:ltr}
a{color:#2156a5;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:0}
p{font-family:inherit;font-weight:400;font-size:1em;line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6{font-size:1em}
hr{border:solid #dddddf;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em;height:0}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9)}
ul,ol,dl{font-size:1em;line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0;font-size:1em}
ul.square li ul,ul.circle li ul,ul.disc li ul{list-style:inherit}
ul.square{list-style-type:square}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
abbr,acronym{text-transform:uppercase;font-size:90%;color:rgba(0,0,0,.8);border-bottom:1px dotted #ddd;cursor:help}
abbr{text-transform:none}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote cite{display:block;font-size:.9375em;color:rgba(0,0,0,.6)}
blockquote cite::before{content:"\2014 \0020"}
blockquote cite a,blockquote cite a:visited{color:rgba(0,0,0,.6)}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}
h1{font-size:2.75em}
h2{font-size:2.3125em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
h4{font-size:1.4375em}}
table{background:#fff;margin-bottom:1.25em;border:solid 1px #dedede}
table thead,table tfoot{background:#f7f8f7}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt{background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{display:table-cell;line-height:1.6}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}
.clearfix::before,.clearfix::after,.float-group::before,.float-group::after{content:" ";display:table}
.clearfix::after,.float-group::after{clear:both}
:not(pre):not([class^=L])>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background:#f7f7f8;-webkit-border-radius:4px;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed;word-wrap:break-word}
:not(pre)>code.nobreak{word-wrap:normal}
:not(pre)>code.nowrap{white-space:nowrap}
pre{color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;line-height:1.45;text-rendering:optimizeSpeed}
pre code,pre pre{color:inherit;font-size:inherit;line-height:inherit}
pre>code{display:block}
pre.nowrap,pre.nowrap pre{white-space:pre;word-wrap:normal}
em em{font-style:normal}
strong strong{font-weight:400}
.keyseq{color:rgba(51,51,51,.8)}
kbd{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;display:inline-block;color:rgba(0,0,0,.8);font-size:.65em;line-height:1.45;background:#f7f7f7;border:1px solid #ccc;-webkit-border-radius:3px;border-radius:3px;-webkit-box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em white inset;box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em #fff inset;margin:0 .15em;padding:.2em .5em;vertical-align:middle;position:relative;top:-.1em;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menuref{color:#000}
.menuseq b:not(.caret),.menuref{font-weight:inherit}
.menuseq{word-spacing:-.02em}
.menuseq b.caret{font-size:1.25em;line-height:.8}
.menuseq i.caret{font-weight:bold;text-align:center;width:.45em}
b.button::before,b.button::after{position:relative;top:-1px;font-weight:400}
b.button::before{content:"[";padding:0 3px 0 2px}
b.button::after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#header,#content,#footnotes,#footer{width:100%;margin-left:auto;margin-right:auto;margin-top:0;margin-bottom:0;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}
#header::before,#header::after,#content::before,#content::after,#footnotes::before,#footnotes::after,#footer::before,#footer::after{content:" ";display:table}
#header::after,#content::after,#footnotes::after,#footer::after{clear:both}
#content{margin-top:1.25em}
#content::before{content:none}
#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #dddddf}
#header>h1:only-child,body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #dddddf;padding-bottom:8px}
#header .details{border-bottom:1px solid #dddddf;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:-ms-flexbox;display:-webkit-flex;display:flex;-ms-flex-flow:row wrap;-webkit-flex-flow:row wrap;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span::before{content:"\00a0\2013\00a0"}
#header .details br+span.author::before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark::before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber::after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #dddddf;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #e7e7e9;padding-bottom:.5em}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc li{line-height:1.3334;margin-top:.3334em}
#toc a{text-decoration:none}
#toc a:active{text-decoration:underline}
#toctitle{color:#7a2518;font-size:1.2em}
@media screen and (min-width:768px){#toctitle{font-size:1.375em}
body.toc2{padding-left:15em;padding-right:0}
#toc.toc2{margin-top:0!important;background:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #e7e7e9;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
#toc.toc2 #toctitle{margin-top:0;margin-bottom:.8rem;font-size:1.2em}
#toc.toc2>ul{font-size:.9em;margin-bottom:0}
#toc.toc2 ul ul{margin-left:0;padding-left:1em}
#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
body.toc2.toc-right{padding-left:0;padding-right:15em}
body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #e7e7e9;left:auto;right:0}}
@media screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}
#toc.toc2{width:20em}
#toc.toc2 #toctitle{font-size:1.375em}
#toc.toc2>ul{font-size:.95em}
#toc.toc2 ul ul{padding-left:1.25em}
body.toc2.toc-right{padding-left:0;padding-right:20em}}
#content #toc{border-style:solid;border-width:1px;border-color:#e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;-webkit-border-radius:4px;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer{max-width:100%;background:rgba(0,0,0,.8);padding:1.25em}
#footer-text{color:rgba(255,255,255,.8);line-height:1.44}
#content{margin-bottom:.625em}
.sect1{padding-bottom:.625em}
@media screen and (min-width:768px){#content{margin-bottom:1.25em}
.sect1{padding-bottom:1.25em}}
.sect1:last-child{padding-bottom:0}
.sect1+.sect1{border-top:1px solid #e7e7e9}
#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}
#content h1>a.anchor::before,h2>a.anchor::before,h3>a.anchor::before,#toctitle>a.anchor::before,.sidebarblock>.content>.title>a.anchor::before,h4>a.anchor::before,h5>a.anchor::before,h6>a.anchor::before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}
details,.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
details>summary:first-of-type{cursor:pointer;display:list-item;outline:none;margin-bottom:.75em}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}
table.tableblock.fit-content>caption.title{white-space:nowrap;width:0}
.paragraph.lead>p,#preamble>.sectionbody>[class="paragraph"]:first-of-type p{font-size:1.21875em;line-height:1.6;color:rgba(0,0,0,.85)}
table.tableblock #preamble>.sectionbody>[class="paragraph"]:first-of-type p{font-size:inherit}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:none}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #dddddf;color:rgba(0,0,0,.6)}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.exampleblock>.content{border-style:solid;border-width:1px;border-color:#e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;-webkit-border-radius:4px;border-radius:4px}
.exampleblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child{margin-bottom:0}
.sidebarblock{border-style:solid;border-width:1px;border-color:#dbdbd6;margin-bottom:1.25em;padding:1.25em;background:#f3f3f2;-webkit-border-radius:4px;border-radius:4px}
.sidebarblock>:first-child{margin-top:0}
.sidebarblock>:last-child{margin-bottom:0}
.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}
.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock>.content>pre{-webkit-border-radius:4px;border-radius:4px;word-wrap:break-word;overflow-x:auto;padding:1em;font-size:.8125em}
@media screen and (min-width:768px){.literalblock pre,.listingblock>.content>pre{font-size:.90625em}}
@media screen and (min-width:1280px){.literalblock pre,.listingblock>.content>pre{font-size:1em}}
.literalblock pre,.listingblock>.content>pre:not(.highlight),.listingblock>.content>pre[class="highlight"],.listingblock>.content>pre[class^="highlight "]{background:#f7f7f8}
.literalblock.output pre{color:#f7f7f8;background:rgba(0,0,0,.9)}
.listingblock>.content{position:relative}
.listingblock code[data-lang]::before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:inherit;opacity:.5}
.listingblock:hover code[data-lang]::before{display:block}
.listingblock.terminal pre .command::before{content:attr(data-prompt);padding-right:.5em;color:inherit;opacity:.5}
.listingblock.terminal pre .command:not([data-prompt])::before{content:"$"}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;-webkit-border-radius:4px;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.prettyprint{background:#f7f7f8}
pre.prettyprint .linenums{line-height:1.45;margin-left:2em}
pre.prettyprint li{background:none;list-style-type:inherit;padding-left:0}
pre.prettyprint li code[data-lang]::before{opacity:1}
pre.prettyprint li:not(:first-child) code[data-lang]::before{display:none}
table.linenotable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.linenotable td[class]{color:inherit;vertical-align:top;padding:0;line-height:inherit;white-space:normal}
table.linenotable td.code{padding-left:.75em}
table.linenotable td.linenos{border-right:1px solid currentColor;opacity:.35;padding-right:.5em}
pre.pygments .lineno{border-right:1px solid currentColor;opacity:.35;display:inline-block;margin-right:.75em}
pre.pygments .lineno::before{content:"";margin-right:-.125em}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock:not(.excerpt)>.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote::before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.75em;margin-right:.5ex;text-align:right}
.verseblock{margin:0 1em 1.25em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.025em;color:rgba(0,0,0,.6)}
.quoteblock.abstract blockquote::before,.quoteblock.excerpt blockquote::before,.quoteblock .quoteblock blockquote::before{display:none}
.quoteblock.abstract blockquote,.quoteblock.abstract p,.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{line-height:1.6;word-spacing:0}
.quoteblock.abstract{margin:0 1em 1.25em;display:block}
.quoteblock.abstract>.title{margin:0 0 .375em;font-size:1.15em;text-align:center}
.quoteblock.excerpt>blockquote,.quoteblock .quoteblock{padding:0 0 .25em 1em;border-left:.25em solid #dddddf}
.quoteblock.excerpt,.quoteblock .quoteblock{margin-left:0}
.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{color:inherit;font-size:1.0625rem}
.quoteblock.excerpt .attribution,.quoteblock .quoteblock .attribution{color:inherit;text-align:left;margin-right:0}
table.tableblock{max-width:100%;border-collapse:separate}
p.tableblock:last-child{margin-bottom:0}
td.tableblock>.content>:last-child{margin-bottom:-1.25em}
td.tableblock>.content>:last-child.sidebarblock{margin-bottom:0}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all>thead>tr>.tableblock,table.grid-all>tbody>tr>.tableblock{border-width:0 1px 1px 0}
table.grid-all>tfoot>tr>.tableblock{border-width:1px 1px 0 0}
table.grid-cols>*>tr>.tableblock{border-width:0 1px 0 0}
table.grid-rows>thead>tr>.tableblock,table.grid-rows>tbody>tr>.tableblock{border-width:0 0 1px}
table.grid-rows>tfoot>tr>.tableblock{border-width:1px 0 0}
table.grid-all>*>tr>.tableblock:last-child,table.grid-cols>*>tr>.tableblock:last-child{border-right-width:0}
table.grid-all>tbody>tr:last-child>.tableblock,table.grid-all>thead:last-child>tr>.tableblock,table.grid-rows>tbody>tr:last-child>.tableblock,table.grid-rows>thead:last-child>tr>.tableblock{border-bottom-width:0}
table.frame-all{border-width:1px}
table.frame-sides{border-width:0 1px}
table.frame-topbot,table.frame-ends{border-width:1px 0}
table.stripes-all tr,table.stripes-odd tr:nth-of-type(odd),table.stripes-even tr:nth-of-type(even),table.stripes-hover tr:hover{background:#f8f8f7}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{display:table-cell;line-height:1.6;background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
ol>li p,ul>li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.checklist,ul.none,ol.none,ul.no-bullet,ol.no-bullet,ol.unnumbered,ul.unstyled,ol.unstyled{list-style-type:none}
ul.no-bullet,ol.no-bullet,ol.unnumbered{margin-left:.625em}
ul.unstyled,ol.unstyled{margin-left:0}
ul.checklist{margin-left:.625em}
ul.checklist li>p:first-child>.fa-square-o:first-child,ul.checklist li>p:first-child>.fa-check-square-o:first-child{width:1.25em;font-size:.8em;position:relative;bottom:.125em}
ul.checklist li>p:first-child>input[type="checkbox"]:first-child{margin-right:.25em}
ul.inline{display:-ms-flexbox;display:-webkit-box;display:flex;-ms-flex-flow:row wrap;-webkit-flex-flow:row wrap;flex-flow:row wrap;list-style:none;margin:0 0 .625em -1.25em}
ul.inline>li{margin-left:1.25em}
.unstyled dl dt{font-weight:400;font-style:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1,td.hdlist2{vertical-align:top;padding:0 .625em}
td.hdlist1{font-weight:bold;padding-bottom:1.25em}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist td:not([class]):first-child{padding:.4em .75em 0;line-height:1;vertical-align:top}
.colist td:not([class]):first-child img{max-width:none}
.colist td:not([class]):last-child{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:solid 4px #fff;-webkit-box-shadow:0 0 0 1px #ddd;box-shadow:0 0 0 1px #ddd}
.imageblock.left{margin:.25em .625em 1.25em 0}
.imageblock.right{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none;display:inline-block}
a.image object{pointer-events:none}
sup.footnote,sup.footnoteref{font-size:.875em;position:static;vertical-align:super}
sup.footnote a,sup.footnoteref a{text-decoration:none}
sup.footnote a:active,sup.footnoteref a:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em;border-width:1px 0 0}
#footnotes .footnote{padding:0 .375em 0 .225em;line-height:1.3334;font-size:.875em;margin-left:1.2em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none;margin-left:-1.05em}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
.gist .file-data>table{border:0;background:#fff;width:100%;margin-bottom:0}
.gist .file-data>table td.line-data{width:99%}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background:#00fafa}
.black{color:#000}
.black-background{background:#000}
.blue{color:#0000bf}
.blue-background{background:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background:#fa00fa}
.gray{color:#606060}
.gray-background{background:#7d7d7d}
.green{color:#006000}
.green-background{background:#007d00}
.lime{color:#00bf00}
.lime-background{background:#00fa00}
.maroon{color:#600000}
.maroon-background{background:#7d0000}
.navy{color:#000060}
.navy-background{background:#00007d}
.olive{color:#606000}
.olive-background{background:#7d7d00}
.purple{color:#600060}
.purple-background{background:#7d007d}
.red{color:#bf0000}
.red-background{background:#fa0000}
.silver{color:#909090}
.silver-background{background:#bcbcbc}
.teal{color:#006060}
.teal-background{background:#007d7d}
.white{color:#bfbfbf}
.white-background{background:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background:#fafa00}
span.icon>.fa{cursor:default}
a span.icon>.fa{cursor:inherit}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note::before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip::before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning::before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution::before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important::before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background:rgba(0,0,0,.8);-webkit-border-radius:100px;border-radius:100px;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]::after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
dt,th.tableblock,td.content,div.footnote{text-rendering:optimizeLegibility}
h1,h2,p,td.content,span.alt{letter-spacing:-.01em}
p strong,td.content strong,div.footnote strong{letter-spacing:-.005em}
p,blockquote,dt,td.content,span.alt{font-size:1.0625rem}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background:#fffef7;border-color:#e0e0dc;-webkit-box-shadow:0 1px 4px #e0e0dc;box-shadow:0 1px 4px #e0e0dc}
.print-only{display:none!important}
@page{margin:1.25cm .75cm}
@media print{*{-webkit-box-shadow:none!important;box-shadow:none!important;text-shadow:none!important}
html{font-size:80%}
a{color:inherit!important;text-decoration:underline!important}
a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
a[href^="http:"]:not(.bare)::after,a[href^="https:"]:not(.bare)::after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
abbr[title]::after{content:" (" attr(title) ")"}
pre,blockquote,tr,img,object,svg{page-break-inside:avoid}
thead{display:table-header-group}
svg{max-width:100%}
p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
#toc,.sidebarblock,.exampleblock>.content{background:none!important}
#toc{border-bottom:1px solid #dddddf!important;padding-bottom:0!important}
body.book #header{text-align:center}
body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em}
body.book #header .details{border:0!important;display:block;padding:0!important}
body.book #header .details span:first-child{margin-left:0!important}
body.book #header .details br{display:block}
body.book #header .details br+span::before{content:none!important}
body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
.listingblock code[data-lang]::before{display:block}
#footer{padding:0 .9375em}
.hide-on-print{display:none!important}
.print-only{display:block!important}
.hide-for-print{display:none!important}
.show-for-print{display:inherit!important}}
@media print,amzn-kf8{#header>h1:first-child{margin-top:1.25rem}
.sect1{padding:0!important}
.sect1+.sect1{border:0}
#footer{background:none}
#footer-text{color:rgba(0,0,0,.6);font-size:.9em}}
@media amzn-kf8{#header,#content,#footnotes,#footer{padding:0}}
</style>
</head>
<body class="article">
<div id="header">
<h1>Python</h1>
<div id="toc" class="toc">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#_anaconda">1. Anaconda</a></li>
<li><a href="#_keras">2. Keras</a></li>
<li><a href="#_pandas">3. Pandas</a></li>
<li><a href="#_pywin32">4. PyWin32</a></li>
<li><a href="#_scrapy">5. Scrapy</a></li>
<li><a href="#_备忘知识点">6. 备忘知识点</a></li>
<li><a href="#_lxf教程学习笔记">7. LXF教程学习笔记</a></li>
</ul>
</div>
</div>
<div id="content">
<div class="sect1">
<h2 id="_anaconda">1. Anaconda</h2>
<div class="sectionbody">
<div class="olist arabic">
<ol class="arabic">
<li>
<p>配置文件所在目录如下，如不存在可手动创建：</p>
<div class="listingblock">
<div class="content">
<pre>C:\Users\JohnDoe\.condarc

auto_update_conda: false
proxy_servers:
    http: http://user:password@proxy.server.com:8080
    https: http://user:password@proxy.server.com:8080
ssl_verify: False</pre>
</div>
</div>
</li>
<li>
<p>简单用法</p>
<div class="listingblock">
<div class="content">
<pre>conda list
conda install package-name
conda config --show</pre>
</div>
</div>
</li>
<li>
<p>需额外安装的常用包</p>
<div class="listingblock">
<div class="content">
<pre>conda install seaborn
conda install basemap
conda install -c conda-forge scrapy</pre>
</div>
</div>
</li>
</ol>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_keras">2. Keras</h2>
<div class="sectionbody">
<div class="olist arabic">
<ol class="arabic">
<li>
<p>backend 切换</p>
<div class="listingblock">
<div class="content">
<pre>If you have run Keras at least once, you will find the Keras configuration file at:

~/.keras/keras.jsonF

If it isn't there, you can create it.

The default configuration file looks like this:

{
    "image_dim_ordering": "tf",
    "epsilon": 1e-07,
    "floatx": "float32",
    "backend": "tensorflow"
}

Simply change the field backend to either "theano" or "tensorflow", and Keras will use the new configuration next time you run any Keras code.</pre>
</div>
</div>
</li>
</ol>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_pandas">3. Pandas</h2>
<div class="sectionbody">
<div class="olist arabic">
<ol class="arabic">
<li>
<p>常用统计函数</p>
<table class="tableblock frame-all grid-all fit-content">
<colgroup>
<col>
<col>
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">统计函数</th>
<th class="tableblock halign-left valign-top">说明</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">count</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">非 NA 值的数量</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">describe</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">针对 Series 或 DF 的列计算汇总统计</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">min, max</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">最小值和最大值</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">argmin, argmax</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">最小值和最大值的索引位置（整数）</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">idxmin ,idxmax</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">最小值和最大值的索引值</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">quantile</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">样本分位数（0 到 1）</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">sum</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">求和</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">mean</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">均值</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">median</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">中位数</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">mad</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">根据均值计算平均绝对离差</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">var</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">方差</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">std</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">标准差</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">skew</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">样本值的偏度（三阶矩）</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">kurt</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">样本值的峰度（四阶矩）</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">cumsum</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">样本值的累计和</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">cummin, cummax</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">样本值的累计最大值和累计最小值</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">cumprod</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">样本值的累计积</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">diff</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">计算一阶差分（对时间序列很有用）</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">pct_change</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">计算百分数变化</p></td>
</tr>
</tbody>
</table>
</li>
</ol>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_pywin32">4. PyWin32</h2>
<div class="sectionbody">
<div class="olist arabic">
<ol class="arabic">
<li>
<p>版本、32/64位选择</p>
<div class="paragraph">
<p>以Python的版本为准，例如64位Windows安装了32位的Python，PyWin32应安装32位的版本。</p>
</div>
</li>
</ol>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_scrapy">5. Scrapy</h2>
<div class="sectionbody">
<div class="olist arabic">
<ol class="arabic">
<li>
<p><a href="https://doc.scrapy.org/en/latest/faq.html">常见问题参考</a></p>
</li>
<li>
<p>创建新项目</p>
<div class="listingblock">
<div class="content">
<pre>scrapy startproject myproject</pre>
</div>
</div>
</li>
</ol>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_备忘知识点">6. 备忘知识点</h2>
<div class="sectionbody">
<div class="olist arabic">
<ol class="arabic">
<li>
<p>运算符按优先级顺序列出如下：</p>
<div class="ulist">
<ul>
<li>
<p>函数调用，寻址，下标</p>
</li>
<li>
<p>幂运算**</p>
</li>
<li>
<p>翻转运算~</p>
</li>
<li>
<p>正负号+-</p>
</li>
<li>
<p>乘*，除/，余%</p>
</li>
<li>
<p>加减号+-</p>
</li>
<li>
<p>左移&lt;&lt;，右移&gt;&gt;</p>
</li>
<li>
<p>按位 与&amp;，异或^，或|</p>
</li>
<li>
<p>比较运算符</p>
</li>
<li>
<p>逻辑 not and or</p>
</li>
<li>
<p>lambda表达式</p>
</li>
</ul>
</div>
</li>
</ol>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_lxf教程学习笔记">7. LXF教程学习笔记</h2>
<div class="sectionbody">
<div class="paragraph">
<p><a href="http://www.liaoxuefeng.com">教程链接</a></p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>特殊符号，特殊值，操作符</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>\</p>
<div class="paragraph">
<p>转义符</p>
</div>
</li>
<li>
<p>b''</p>
<div class="paragraph">
<p>b表示bytes</p>
</div>
</li>
<li>
<p>r'\\'</p>
<div class="paragraph">
<p>使用r后，引号内部的字符串不转义</p>
</div>
</li>
<li>
<p>'''&#8230;&#8203;'''</p>
<div class="paragraph">
<p>交互模式下，三个引号可以表示多行内容</p>
</div>
</li>
<li>
<p>None</p>
<div class="paragraph">
<p>空值是Python里一个特殊的值，用None表示。</p>
</div>
</li>
<li>
<p>inf（无限大）</p>
<div class="paragraph">
<p>整数没有大小限制。浮点数也没有大小限制，但超出一定范围就直接表示为inf（无限大）。</p>
</div>
</li>
<li>
<p>//</p>
<div class="paragraph">
<p>取整除法，返回商的整数部分。</p>
</div>
</li>
<li>
<p>%</p>
<div class="paragraph">
<p>取模，返回除法的余数。</p>
</div>
</li>
</ol>
</div>
</li>
<li>
<p>变量赋值</p>
<div class="listingblock">
<div class="content">
<pre>// 指针传递，打印结果为'ABC'。
a = 'ABC'
b = a
a = 'XYZ'
print(b)</pre>
</div>
</div>
</li>
<li>
<p>字符串</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>对于单个字符的编码，Python提供了ord()函数获取字符的整数表示，chr()函数把编码转换为对应的字符</p>
<div class="listingblock">
<div class="content">
<pre>&gt;&gt;&gt; ord('A')
65
&gt;&gt;&gt; ord('中')
20013
&gt;&gt;&gt; chr(66)
'B'
&gt;&gt;&gt; chr(25991)
'文'</pre>
</div>
</div>
</li>
<li>
<p>如果知道字符的整数编码，还可以用十六进制</p>
<div class="listingblock">
<div class="content">
<pre>&gt;&gt;&gt; '\u4e2d\u6587'
'中文'</pre>
</div>
</div>
</li>
<li>
<p>以Unicode表示的str通过encode()方法可以编码为指定的bytes</p>
<div class="listingblock">
<div class="content">
<pre>&gt;&gt;&gt; 'ABC'.encode('ascii')
b'ABC'
&gt;&gt;&gt; '中文'.encode('utf-8')
b'\xe4\xb8\xad\xe6\x96\x87'</pre>
</div>
</div>
</li>
<li>
<p>把bytes变为str，需要用decode()方法</p>
<div class="listingblock">
<div class="content">
<pre>&gt;&gt;&gt; b'ABC'.decode('ascii')
'ABC'
&gt;&gt;&gt; b'\xe4\xb8\xad\xe6\x96\x87'.decode('utf-8')
'中文'</pre>
</div>
</div>
</li>
<li>
<p>len()函数计算的是str的字符数，如果换成bytes，len()函数就计算字节数</p>
<div class="listingblock">
<div class="content">
<pre>&gt;&gt;&gt; len('ABC')
3
&gt;&gt;&gt; len('中文')
2
&gt;&gt;&gt; len(b'ABC')
3
&gt;&gt;&gt; len(b'\xe4\xb8\xad\xe6\x96\x87')
6
&gt;&gt;&gt; len('中文'.encode('utf-8'))
6</pre>
</div>
</div>
</li>
<li>
<p>为了避免乱码问题，应始终坚持使用UTF-8编码对 str 和 bytes 进行转换。通常在Python源代码文件开头写上如下两行</p>
<div class="listingblock">
<div class="content">
<pre>#!/usr/bin/env python3
# -*- coding: utf-8 -*-</pre>
</div>
</div>
</li>
</ol>
</div>
</li>
<li>
<p>格式化</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>常见占位符</p>
<table class="tableblock frame-all grid-all fit-content">
<colgroup>
<col>
<col>
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">%d</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">整数</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">%f</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">浮点数</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">%s</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">字符串</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">%x</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">十六进制整数</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">%%</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">转义，表示一个%</p></td>
</tr>
</tbody>
</table>
</li>
<li>
<p>格式化整数和浮点数还可以指定是否补0和整数与小数的位数</p>
<div class="listingblock">
<div class="content">
<pre>&gt;&gt;&gt; '%2d-%02d' % (3, 1)
' 3-01'
&gt;&gt;&gt; '%.2f' % 3.1415926
'3.14'</pre>
</div>
</div>
</li>
</ol>
</div>
</li>
<li>
<p>tuple</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>因为括号()既可以表示tuple，又可以表示数学公式中的小括号，这种情况下，按小括号进行计算。
要定义一个只有1个元素的tuple，定义时必须加一个逗号,，来消除歧义。</p>
<div class="listingblock">
<div class="content">
<pre>&gt;&gt;&gt; t = (1)
&gt;&gt;&gt; t
1
&gt;&gt;&gt; t = (1,)
&gt;&gt;&gt; t
(1,)</pre>
</div>
</div>
</li>
<li>
<p>“可变的”tuple：tuple每个元素的“指向”不可改变，但指向的List允许改变，参考下例：</p>
<div class="listingblock">
<div class="content">
<pre>&gt;&gt;&gt; t = ('a', 'b', ['A', 'B'])
&gt;&gt;&gt; t[2][0] = 'X'
&gt;&gt;&gt; t[2][1] = 'Y'
&gt;&gt;&gt; t
('a', 'b', ['X', 'Y'])</pre>
</div>
</div>
</li>
</ol>
</div>
</li>
<li>
<p>pass</p>
<div class="paragraph">
<p>占位符</p>
</div>
</li>
<li>
<p>函数</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>函数执行完毕也没有return语句时，自动return none。</p>
</li>
<li>
<p>函数可以同时返回多个值，但其实就是一个tuple。</p>
</li>
<li>
<p>默认参数</p>
<div class="listingblock">
<div class="content">
<pre>#  异常
def add_end(L=[]):
    L.append('END')
    return L

&gt;&gt;&gt; add_end()
['END']
&gt;&gt;&gt; add_end()
['END', 'END']

# 正常
def add_end(L=None):
    if L is None:
        L = []
    L.append('END')
    return L

&gt;&gt;&gt; add_end()
['END']
&gt;&gt;&gt; add_end()
['END']</pre>
</div>
</div>
</li>
<li>
<p>可变参数</p>
<div class="paragraph">
<p>可变参数允许你传入0个或任意个参数，这些可变参数在函数调用时自动组装为一个tuple。</p>
</div>
<div class="listingblock">
<div class="content">
<pre>#  给定一组数字a，b，c……，请计算a2 + b2 + c2 + ……
def calc(*numbers):  #加个*即可
    sum = 0
    for n in numbers:
        sum = sum + n * n
    return sum</pre>
</div>
</div>
</li>
<li>
<p>关键字参数</p>
<div class="paragraph">
<p>关键字参数允许你传入0个或任意个含参数名的参数，这些关键字参数在函数内部自动组装为一个dict。</p>
</div>
<div class="listingblock">
<div class="content">
<pre>#  给定一组数字a，b，c……，请计算a2 + b2 + c2 + ……
def person(name, age, **kw):
    print('name:', name, 'age:', age, 'other:', kw)

&gt;&gt;&gt; person('Adam', 45, gender='M', job='Engineer')
name: Adam age: 45 other: {'gender': 'M', 'job': 'Engineer'}
&gt;&gt;&gt; extra = {'city': 'Beijing', 'job': 'Engineer'}

#  **extra表示把extra这个dict的所有key-value用关键字参数传入到函数的**kw参数，kw将获得一个dict。
#  注意kw获得的dict是extra的一份拷贝，对kw的改动不会影响到函数外的extra。
&gt;&gt;&gt; person('Jack', 24, **extra)
name: Jack age: 24 other: {'city': 'Beijing', 'job': 'Engineer'}</pre>
</div>
</div>
</li>
<li>
<p>命名关键字参数</p>
<div class="paragraph">
<p>如果要限制关键字参数的名字，就可以用命名关键字参数，例如，只接收city和job作为关键字参数。</p>
</div>
<div class="listingblock">
<div class="content">
<pre>#  特殊分隔符*后面的参数被视为命名关键字参数。
def person(name, age, *, city, job):
    print(name, age, city, job)

&gt;&gt;&gt; person('Jack', 24, city='Beijing', job='Engineer')
Jack 24 Beijing Engineer

#  如果函数定义中已经有了一个可变参数，后面跟着的命名关键字参数就不再需要一个特殊分隔符*了。
def person(name, age, *args, city, job):
    print(name, age, args, city, job)

#  由于命名关键字参数city具有默认值，调用时，可不传入city参数
def person(name, age, *, city='Beijing', job):
    print(name, age, city, job)

&gt;&gt;&gt; person('Jack', 24, job='Engineer')
Jack 24 Beijing Engineer</pre>
</div>
</div>
</li>
<li>
<p>参数组合</p>
<div class="olist lowerroman">
<ol class="lowerroman" type="i">
<li>
<p>参数定义的顺序必须是：必选参数、默认参数、可变参数、命名关键字参数和关键字参数。</p>
</li>
<li>
<p>使用*args和**kw是Python的习惯写法，当然也可以用其他参数名，但最好使用习惯用法。</p>
<div class="olist upperalpha">
<ol class="upperalpha" type="A">
<li>
<p>*args是可变参数，args接收的是一个tuple；</p>
</li>
<li>
<p>**kw是关键字参数，kw接收的是一个dict。</p>
</li>
</ol>
</div>
</li>
</ol>
</div>
</li>
</ol>
</div>
</li>
<li>
<p>高级特性</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>切片</p>
<div class="paragraph">
<p>L[0:3]表示，从索引0开始取，直到索引3为止，但不包括索引3。即索引0，1，2，正好是3个元素。
如果第一个索引是0，还可以省略。</p>
</div>
<div class="olist lowerroman">
<ol class="lowerroman" type="i">
<li>
<p>先创建一个0-99的数列：</p>
<div class="listingblock">
<div class="content">
<pre>&gt;&gt;&gt; L = list(range(100))
&gt;&gt;&gt; L
[0, 1, 2, 3, ..., 99]</pre>
</div>
</div>
</li>
<li>
<p>前10个数：</p>
<div class="listingblock">
<div class="content">
<pre>&gt;&gt;&gt; L[:10]
[0, 1, 2, 3, 4, 5, 6, 7, 8, 9]</pre>
</div>
</div>
</li>
<li>
<p>后10个数：</p>
<div class="listingblock">
<div class="content">
<pre>&gt;&gt;&gt; L[-10:]
[90, 91, 92, 93, 94, 95, 96, 97, 98, 99]</pre>
</div>
</div>
</li>
<li>
<p>前11-20个数：</p>
<div class="listingblock">
<div class="content">
<pre>&gt;&gt;&gt; L[10:20]
[10, 11, 12, 13, 14, 15, 16, 17, 18, 19]</pre>
</div>
</div>
</li>
<li>
<p>前10个数，每两个取一个：</p>
<div class="listingblock">
<div class="content">
<pre>&gt;&gt;&gt; L[:10:2]
[0, 2, 4, 6, 8]</pre>
</div>
</div>
</li>
<li>
<p>所有数，每5个取一个：</p>
<div class="listingblock">
<div class="content">
<pre>&gt;&gt;&gt; L[::5]
[0, 5, 10, 15, 20, 25, 30, 35, 40, 45, 50, 55, 60, 65, 70, 75, 80, 85, 90, 95]</pre>
</div>
</div>
</li>
<li>
<p>只写[:]就可以原样复制一个list：</p>
<div class="listingblock">
<div class="content">
<pre>&gt;&gt;&gt; L[:]
[0, 1, 2, 3, ..., 99]</pre>
</div>
</div>
</li>
<li>
<p>tuple也可以用切片操作，只是操作的结果仍是tuple：</p>
<div class="listingblock">
<div class="content">
<pre>&gt;&gt;&gt; (0, 1, 2, 3, 4, 5)[:3]
(0, 1, 2)</pre>
</div>
</div>
</li>
<li>
<p>字符串也可以用切片操作，只是操作结果仍是字符串：</p>
<div class="listingblock">
<div class="content">
<pre>&gt;&gt;&gt; 'ABCDEFG'[:3]
'ABC'
&gt;&gt;&gt; 'ABCDEFG'[::2]
'ACEG'</pre>
</div>
</div>
</li>
</ol>
</div>
</li>
<li>
<p>迭代</p>
<div class="olist lowerroman">
<ol class="lowerroman" type="i">
<li>
<p>除了有下标的list可以迭代，没有下标的dict也可以迭代。</p>
<div class="olist upperalpha">
<ol class="upperalpha" type="A">
<li>
<p>默认情况下，dict迭代的是key。</p>
</li>
<li>
<p>如果要迭代value，可以用for value in d.values()。</p>
</li>
<li>
<p>如果要同时迭代key和value，可以用for k, v in d.items()。</p>
</li>
</ol>
</div>
</li>
<li>
<p>字符串也是可迭代对象。</p>
</li>
<li>
<p>判断一个对象是可迭代对象的方法是通过collections模块的Iterable类型判断：</p>
<div class="listingblock">
<div class="content">
<pre>&gt;&gt;&gt; from collections import Iterable
&gt;&gt;&gt; isinstance('abc', Iterable) # str是否可迭代
True
&gt;&gt;&gt; isinstance([1,2,3], Iterable) # list是否可迭代
True
&gt;&gt;&gt; isinstance(123, Iterable) # 整数是否可迭代
False</pre>
</div>
</div>
</li>
<li>
<p>Python内置的enumerate函数可以把list变成索引-元素对，在for循环中同时迭代索引和元素本身：</p>
<div class="listingblock">
<div class="content">
<pre>&gt;&gt;&gt; for i, value in enumerate(['A', 'B', 'C']):
...     print(i, value)
...
0 A
1 B
2 C</pre>
</div>
</div>
</li>
</ol>
</div>
</li>
<li>
<p>列表生成式</p>
<div class="olist lowerroman">
<ol class="lowerroman" type="i">
<li>
<p>生成list [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]</p>
<div class="listingblock">
<div class="content">
<pre>&gt;&gt;&gt; list(range(1, 11))
[1, 2, 3, 4, 5, 6, 7, 8, 9, 10]</pre>
</div>
</div>
</li>
<li>
<p>生成[1x1, 2x2, 3x3, &#8230;&#8203;, 10x10]</p>
<div class="listingblock">
<div class="content">
<pre>&gt;&gt;&gt; [x * x for x in range(1, 11)]
[1, 4, 9, 16, 25, 36, 49, 64, 81, 100]</pre>
</div>
</div>
</li>
<li>
<p>for循环后面还可以加上if判断，这样我们就可以筛选出仅偶数的平方：</p>
<div class="listingblock">
<div class="content">
<pre>&gt;&gt;&gt; [x * x for x in range(1, 11) if x % 2 == 0]
[4, 16, 36, 64, 100]</pre>
</div>
</div>
</li>
<li>
<p>还可以使用两层循环，可以生成全排列：</p>
<div class="listingblock">
<div class="content">
<pre>&gt;&gt;&gt; [m + n for m in 'ABC' for n in 'XYZ']
['AX', 'AY', 'AZ', 'BX', 'BY', 'BZ', 'CX', 'CY', 'CZ']</pre>
</div>
</div>
</li>
<li>
<p>列出当前目录下的所有文件和目录名，可以通过一行代码实现：</p>
<div class="listingblock">
<div class="content">
<pre>&gt;&gt;&gt; import os # 导入os模块，模块的概念后面讲到
&gt;&gt;&gt; [d for d in os.listdir('.')] # os.listdir可以列出文件和目录
['.idea', 'test1.py']</pre>
</div>
</div>
</li>
<li>
<p>for循环可以同时使用多个变量，比如dict的items()可以同时迭代key和value：</p>
<div class="listingblock">
<div class="content">
<pre>&gt;&gt;&gt; d = {'x': 'A', 'y': 'B', 'z': 'C' }
&gt;&gt;&gt; for k, v in d.items():
...     print(k, '=', v)
...
y = B
x = A
z = C</pre>
</div>
</div>
</li>
<li>
<p>列表生成式也可以使用两个变量来生成list：</p>
<div class="listingblock">
<div class="content">
<pre>&gt;&gt;&gt; d = {'x': 'A', 'y': 'B', 'z': 'C' }
&gt;&gt;&gt; [k + '=' + v for k, v in d.items()]
['y=B', 'x=A', 'z=C']</pre>
</div>
</div>
</li>
<li>
<p>把一个list中所有的字符串变成小写：</p>
<div class="listingblock">
<div class="content">
<pre>&gt;&gt;&gt; L = ['Hello', 'World', 'IBM', 'Apple']
&gt;&gt;&gt; [s.lower() for s in L]
['hello', 'world', 'ibm', 'apple']</pre>
</div>
</div>
</li>
</ol>
</div>
</li>
<li>
<p>生成器</p>
<div class="olist lowerroman">
<ol class="lowerroman" type="i">
<li>
<p>斐波那契数列（Fibonacci），除第一个和第二个数外，任意一个数都可由前两个数相加得到：
1, 1, 2, 3, 5, 8, 13, 21, 34, &#8230;&#8203;</p>
<div class="olist upperalpha">
<ol class="upperalpha" type="A">
<li>
<p>用函数打印实现如下：</p>
<div class="listingblock">
<div class="content">
<pre>def fib(max):
    n, a, b = 0, 0, 1
    while n &lt; max:
        print(b)
        a, b = b, a + b
        n = n + 1
    return 'done'</pre>
</div>
</div>
</li>
<li>
<p>要把fib函数变成generator，只需要把print(b)改为yield b就可以了：</p>
<div class="listingblock">
<div class="content">
<pre>def fib(max):
    n, a, b = 0, 0, 1
    while n &lt; max:
        yield b
        a, b = b, a + b
        n = n + 1
    return 'done'</pre>
</div>
</div>
</li>
</ol>
</div>
</li>
<li>
<p>杨辉三角举例实现</p>
<div class="listingblock">
<div class="content">
<pre># 期待输出:
# [1]
# [1, 1]
# [1, 2, 1]
# [1, 3, 3, 1]
# [1, 4, 6, 4, 1]
# [1, 5, 10, 10, 5, 1]
# [1, 6, 15, 20, 15, 6, 1]
# [1, 7, 21, 35, 35, 21, 7, 1]
# [1, 8, 28, 56, 70, 56, 28, 8, 1]
# [1, 9, 36, 84, 126, 126, 84, 36, 9, 1]
n = 0
for t in triangles():
    print(t)
    n += 1
    if n == 10:
        break

def triangles():
    mylist = [1]
    while True:
        yield mylist
        mylist.append(0)
        mylist = [mylist[i - 1] + mylist[i] for i in range(len(mylist))]</pre>
</div>
</div>
</li>
</ol>
</div>
</li>
<li>
<p>迭代器</p>
<div class="olist lowerroman">
<ol class="lowerroman" type="i">
<li>
<p>可以被next()函数调用并不断返回下一个值的对象称为迭代器：Iterator。</p>
</li>
<li>
<p>使用isinstance()可以判断一个对象是否是Iterator对象。</p>
<div class="listingblock">
<div class="content">
<pre>&gt;&gt;&gt; from collections import Iterator
&gt;&gt;&gt; isinstance((x for x in range(10)), Iterator)
True
&gt;&gt;&gt; isinstance([], Iterator)
False
&gt;&gt;&gt; isinstance({}, Iterator)
False
&gt;&gt;&gt; isinstance('abc', Iterator)
False</pre>
</div>
</div>
</li>
<li>
<p>生成器都是Iterator对象，但list、dict、str虽然是Iterable，却不是Iterator。</p>
</li>
<li>
<p>把list、dict、str等Iterable变成Iterator可以使用iter()函数：</p>
<div class="listingblock">
<div class="content">
<pre>&gt;&gt;&gt; isinstance(iter([]), Iterator)
True
&gt;&gt;&gt; isinstance(iter('abc'), Iterator)
True</pre>
</div>
</div>
</li>
</ol>
</div>
</li>
</ol>
</div>
</li>
<li>
<p>函数式编程</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>高阶函数</p>
<div class="olist lowerroman">
<ol class="lowerroman" type="i">
<li>
<p>map/reduce</p>
<div class="olist upperalpha">
<ol class="upperalpha" type="A">
<li>
<p>map()函数接收两个参数，一个是函数，一个是Iterable。
map将传入的函数依次作用到序列的每个元素，并把结果作为新的Iterator返回。</p>
<div class="paragraph">
<p>函数f(x)=x2，要把这个函数作用在一个list [1, 2, 3, 4, 5, 6, 7, 8, 9]上，就可以用map()实现如下：</p>
</div>
<div class="listingblock">
<div class="content">
<pre>&gt;&gt;&gt; def f(x):
...     return x * x
...
&gt;&gt;&gt; r = map(f, [1, 2, 3, 4, 5, 6, 7, 8, 9])
&gt;&gt;&gt; list(r)
[1, 4, 9, 16, 25, 36, 49, 64, 81]</pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre>&gt;&gt;&gt; list(map(str, [1, 2, 3, 4, 5, 6, 7, 8, 9]))
['1', '2', '3', '4', '5', '6', '7', '8', '9']</pre>
</div>
</div>
</li>
<li>
<p>reduce把一个函数作用在一个序列[x1, x2, x3, &#8230;&#8203;]上，这个函数必须接收两个参数，
reduce把结果继续和序列的下一个元素做累积计算，其效果就是：</p>
<div class="listingblock">
<div class="content">
<pre>reduce(f, [x1, x2, x3, x4]) = f(f(f(x1, x2), x3), x4)</pre>
</div>
</div>
<div class="paragraph">
<p>例如对一个序列求和：</p>
</div>
<div class="listingblock">
<div class="content">
<pre>&gt;&gt;&gt; from functools import reduce
&gt;&gt;&gt; def add(x, y):
...     return x + y
...
&gt;&gt;&gt; reduce(add, [1, 3, 5, 7, 9])
25</pre>
</div>
</div>
<div class="paragraph">
<p>把序列[1, 3, 5, 7, 9]变换成整数13579：</p>
</div>
<div class="listingblock">
<div class="content">
<pre>&gt;&gt;&gt; from functools import reduce
&gt;&gt;&gt; def fn(x, y):
...     return x * 10 + y
...
&gt;&gt;&gt; reduce(fn, [1, 3, 5, 7, 9])
13579</pre>
</div>
</div>
<div class="paragraph">
<p>配合map()，我们就可以写出把str转换为int的函数：</p>
</div>
<div class="listingblock">
<div class="content">
<pre>from functools import reduce

def str2int(s):
    def fn(x, y):
        return x * 10 + y
    def char2num(s):
        return {'0': 0, '1': 1, '2': 2, '3': 3, '4': 4, '5': 5, '6': 6, '7': 7, '8': 8, '9': 9}[s]
    return reduce(fn, map(char2num, s))</pre>
</div>
</div>
</li>
</ol>
</div>
</li>
<li>
<p>filter</p>
<div class="paragraph">
<p>filter()也接收一个函数和一个序列，把传入的函数依次作用于每个元素，
然后根据返回值是True还是False决定保留还是丢弃该元素。</p>
</div>
<div class="paragraph">
<p>用埃氏筛法计算素数的方法举例：</p>
</div>
<div class="listingblock">
<div class="content">
<pre>#  构造一个从3开始的奇数序列
def _odd_iter():
    n = 1
    while True:
        n += 2
        yield n

#  筛选函数
def _not_divisible(n):
    return lambda x: x % n &gt; 0

#  定义一个生成器，不断返回下一个素数
def primes():
    yield 2
    it = _odd_iter() # 初始序列
    while True:
        n = next(it) # 返回序列的第一个数
        yield n
        it = filter(_not_divisible(n), it) # 构造新序列

# 打印1000以内的素数:
for n in primes():
    if n &lt; 1000:
        print(n)
    else:
        break</pre>
</div>
</div>
</li>
<li>
<p>sorted</p>
<div class="paragraph">
<p>sorted()函数可以对list进行排序，还可以接收一个key函数来实现自定义的排序，例如按绝对值大小排序：</p>
</div>
<div class="listingblock">
<div class="content">
<pre>&gt;&gt;&gt; sorted([36, 5, -12, 9, -21], key=abs)
[5, 9, -12, -21, 36]</pre>
</div>
</div>
<div class="paragraph">
<p>忽略大小写的排序：</p>
</div>
<div class="listingblock">
<div class="content">
<pre>&gt;&gt;&gt; sorted(['bob', 'about', 'Zoo', 'Credit'], key=str.lower)
['about', 'bob', 'Credit', 'Zoo']</pre>
</div>
</div>
<div class="paragraph">
<p>要进行反向排序，不必改动key函数，可以传入第三个参数reverse=True：</p>
</div>
<div class="listingblock">
<div class="content">
<pre>&gt;&gt;&gt; sorted(['bob', 'about', 'Zoo', 'Credit'], key=str.lower, reverse=True)
['Zoo', 'Credit', 'bob', 'about']</pre>
</div>
</div>
</li>
</ol>
</div>
</li>
<li>
<p>返回函数</p>
<div class="olist lowerroman">
<ol class="lowerroman" type="i">
<li>
<p>函数作为返回值</p>
<div class="listingblock">
<div class="content">
<pre>def lazy_sum(*args):
    def sum():
        ax = 0
        for n in args:
            ax = ax + n
        return ax
    return sum</pre>
</div>
</div>
<div class="paragraph">
<p>函数lazy_sum中又定义了函数sum，并且，内部函数sum可以引用外部函数lazy_sum的参数和局部变量，
当lazy_sum返回函数sum时，相关参数和变量都保存在返回的函数中，
这种称为“闭包（Closure）”的程序结构拥有极大的威力。</p>
</div>
<div class="paragraph">
<p>当调用lazy_sum()时，每次调用都会返回一个新的函数，即使传入相同的参数：</p>
</div>
<div class="listingblock">
<div class="content">
<pre>&gt;&gt;&gt; f1 = lazy_sum(1, 3, 5, 7, 9)
&gt;&gt;&gt; f2 = lazy_sum(1, 3, 5, 7, 9)
&gt;&gt;&gt; f1==f2
False</pre>
</div>
</div>
</li>
<li>
<p>闭包</p>
<div class="paragraph">
<p>返回的函数并没有立刻执行，而是直到调用了f()才执行：</p>
</div>
<div class="listingblock">
<div class="content">
<pre>def count():
    fs = []
    for i in range(1, 4):
        def f():
             return i*i
        fs.append(f)
    return fs

f1, f2, f3 = count()

&gt;&gt;&gt; f1()
9
&gt;&gt;&gt; f2()
9
&gt;&gt;&gt; f3()
9</pre>
</div>
</div>
<div class="paragraph">
<p>返回闭包时牢记的一点就是：返回函数不要引用任何循环变量，或者后续会发生变化的变量。</p>
</div>
<div class="paragraph">
<p>如果一定要引用循环变量怎么办？方法是再创建一个函数，用该函数的参数绑定循环变量当前的值，
无论该循环变量后续如何更改，已绑定到函数参数的值不变：</p>
</div>
<div class="listingblock">
<div class="content">
<pre>def count():
    def f(j):
        def g():
            return j*j
        return g
    fs = []
    for i in range(1, 4):
        fs.append(f(i)) # f(i)立刻被执行，因此i的当前值被传入f()
    return fs

&gt;&gt;&gt; f1, f2, f3 = count()
&gt;&gt;&gt; f1()
1
&gt;&gt;&gt; f2()
4
&gt;&gt;&gt; f3()
9</pre>
</div>
</div>
</li>
</ol>
</div>
</li>
<li>
<p>匿名函数</p>
<div class="paragraph">
<p>关键字lambda表示匿名函数，冒号前面的x表示函数参数。</p>
</div>
<div class="listingblock">
<div class="content">
<pre>&gt;&gt;&gt; list(map(lambda x: x * x, [1, 2, 3, 4, 5, 6, 7, 8, 9]))
[1, 4, 9, 16, 25, 36, 49, 64, 81]</pre>
</div>
</div>
<div class="paragraph">
<p>匿名函数lambda x: x * x实际上就是：</p>
</div>
<div class="listingblock">
<div class="content">
<pre>def f(x):
    return x * x</pre>
</div>
</div>
<div class="paragraph">
<p>匿名函数只能有一个表达式，不用写return，返回值就是该表达式的结果。</p>
</div>
</li>
<li>
<p>装饰器</p>
<div class="paragraph">
<p>在代码运行期间动态增加功能的方式，称之为“装饰器”（Decorator）。</p>
</div>
<div class="olist lowerroman">
<ol class="lowerroman" type="i">
<li>
<p>一个完整的decorator的写法如下：</p>
<div class="listingblock">
<div class="content">
<pre>import functools

def log(func):
    @functools.wraps(func)
    def wrapper(*args, **kw):
        print('call %s():' % func.__name__)
        return func(*args, **kw)
    return wrapper</pre>
</div>
</div>
</li>
<li>
<p>针对带参数的decorator：</p>
<div class="listingblock">
<div class="content">
<pre>import functools

def log(text):
    def decorator(func):
        @functools.wraps(func)
        def wrapper(*args, **kw):
            print('%s %s():' % (text, func.__name__))
            return func(*args, **kw)
        return wrapper
    return decorator</pre>
</div>
</div>
</li>
</ol>
</div>
</li>
<li>
<p>偏函数</p>
<div class="olist lowerroman">
<ol class="lowerroman" type="i">
<li>
<p>Python的偏函数（Partial function）和数学意义上的偏函数不一样。</p>
</li>
<li>
<p>functools.partial就是帮助我们创建一个偏函数的，不需要我们自己定义int2()，
可以直接使用下面的代码创建一个新的函数int2：</p>
<div class="listingblock">
<div class="content">
<pre>&gt;&gt;&gt; import functools
&gt;&gt;&gt; int2 = functools.partial(int, base=2)
&gt;&gt;&gt; int2('1000000')
64
&gt;&gt;&gt; int2('1010101')
85</pre>
</div>
</div>
<div class="paragraph">
<p>functools.partial的作用就是，把一个函数的某些参数给固定住（也就是设置默认值），
返回一个新的函数，调用这个新函数会更简单。</p>
</div>
<div class="paragraph">
<p>仅仅是把base参数重新设定默认值为2，但也可以在函数调用时传入其他值：</p>
</div>
<div class="listingblock">
<div class="content">
<pre>&gt;&gt;&gt; int2('1000000', base=10)
1000000</pre>
</div>
</div>
</li>
<li>
<p>创建偏函数时，实际上可以接收函数对象、<strong>args和</strong>*kw这3个参数，当传入：</p>
<div class="listingblock">
<div class="content">
<pre>max2 = functools.partial(max, 10)</pre>
</div>
</div>
<div class="paragraph">
<p>实际上会把10作为*args的一部分自动加到左边，也就是：</p>
</div>
<div class="listingblock">
<div class="content">
<pre>max2(5, 6, 7)</pre>
</div>
</div>
<div class="paragraph">
<p>相当于：</p>
</div>
<div class="listingblock">
<div class="content">
<pre>args = (10, 5, 6, 7)
max(*args)</pre>
</div>
</div>
<div class="paragraph">
<p>结果为10。</p>
</div>
</li>
</ol>
</div>
</li>
</ol>
</div>
</li>
<li>
<p>模块</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>每一个包目录下面都会有一个<em>init</em>.py的文件，这个文件是必须存在的，否则，
Python就把这个目录当成普通目录，而不是一个包。</p>
</li>
<li>
<p><em>init</em>.py可以是空文件，也可以有Python代码。</p>
</li>
<li>
<p>作用域</p>
<div class="paragraph">
<p>有的函数和变量我们希望仅仅在模块内部使用。在Python中，是通过_前缀来实现的。</p>
</div>
</li>
<li>
<p>所有已安装的内置模块和第三方模块，搜索路径存放在sys模块的path变量中：</p>
<div class="listingblock">
<div class="content">
<pre>&gt;&gt;&gt; import sys
&gt;&gt;&gt; sys.path</pre>
</div>
</div>
</li>
<li>
<p>要添加自己的搜索目录，有两种方法：</p>
<div class="olist lowerroman">
<ol class="lowerroman" type="i">
<li>
<p>一是直接修改sys.path，添加要搜索的目录：</p>
<div class="listingblock">
<div class="content">
<pre>&gt;&gt;&gt; import sys
&gt;&gt;&gt; sys.path.append('/Users/michael/my_py_scripts')</pre>
</div>
</div>
<div class="paragraph">
<p>这种方法是在运行时修改，运行结束后失效。</p>
</div>
</li>
<li>
<p>第二种方法是设置环境变量PYTHONPATH，该环境变量的内容会被自动添加到模块搜索路径中。
注意只需要添加你自己的搜索路径，Python自己本身的搜索路径不受影响。</p>
</li>
</ol>
</div>
</li>
</ol>
</div>
</li>
<li>
<p>面向对象编程</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>类和实例</p>
<div class="listingblock">
<div class="content">
<pre>class Student(object):

    def __init__(self, name, score):
        self.name = name
        self.score = score</pre>
</div>
</div>
<div class="olist lowerroman">
<ol class="lowerroman" type="i">
<li>
<p>class后面紧接着是类名，即Student，类名通常是大写开头的单词</p>
</li>
<li>
<p>紧接着是(object)，表示该类是从哪个类继承下来的</p>
</li>
<li>
<p>如果没有合适的继承类，就使用object类，这是所有类最终都会继承的类。</p>
</li>
</ol>
</div>
</li>
<li>
<p>访问限制</p>
<div class="olist lowerroman">
<ol class="lowerroman" type="i">
<li>
<p>属性名称前加双下划线(__)表示私有变量</p>
<div class="listingblock">
<div class="content">
<pre>// 不能直接访问__name是因为解释器对外把__name改成了_Student__name，所以仍能通过_Student__name来访问__name变量。
// 但强烈建议不要这么干，因为不同版本的Python解释器可能会把__name改成不同的变量名。

// 注意下面这种错误写法
&gt;&gt;&gt; bart = Student('Bart Simpson', 98)
&gt;&gt;&gt; bart.get_name()
'Bart Simpson'
&gt;&gt;&gt; bart.__name = 'New Name' # 设置__name变量！
&gt;&gt;&gt; bart.__name
'New Name'
// 表面上外部代码“成功”设置了__name变量，但实际这个__name变量和class内部的__name变量不是一个变量！
// 内部的__name变量已经被Python解释器自动改成了_Student__name，而外部代码给bart新增了一个__name变量。
&gt;&gt;&gt; bart.get_name() # get_name()内部返回self.__name
'Bart Simpson'</pre>
</div>
</div>
</li>
<li>
<p>变量名以双下划线开头，并且以双下划线结尾的，是特殊变量，特殊变量可以直接访问</p>
</li>
<li>
<p>单下划线开头的变量名，外部可以访问，但按照约定俗成的用法，“虽然可以被访问，但是，请视为私有变量，不要随意访问”。</p>
</li>
</ol>
</div>
</li>
<li>
<p>继承和多态</p>
<div class="olist lowerroman">
<ol class="lowerroman" type="i">
<li>
<p>对于静态语言（例如Java）来说，如果需要传入Animal类型，则传入的对象必须是Animal类型或者它的子类，否则，将无法调用run()方法。</p>
</li>
<li>
<p>对于Python这样的动态语言来说，则不一定需要传入Animal类型。我们只需要保证传入的对象有一个run()方法就可以了。</p>
</li>
</ol>
</div>
</li>
<li>
<p>获取对象信息</p>
<div class="olist lowerroman">
<ol class="lowerroman" type="i">
<li>
<p>type()函数</p>
</li>
<li>
<p>isinstance()函数</p>
</li>
<li>
<p>dir()函数</p>
<div class="paragraph">
<p>获得一个对象的所有属性和方法</p>
</div>
</li>
<li>
<p>配合getattr()、setattr()以及hasattr()，可以直接操作一个对象的状态</p>
</li>
</ol>
</div>
</li>
<li>
<p>实例属性和类属性</p>
<div class="paragraph">
<p>不要把实例属性和类属性使用相同的名字，因为相同名称的实例属性将屏蔽掉类属性，但是当你删除实例属性后，再使用相同的名称，访问到的将是类属性。</p>
</div>
</li>
</ol>
</div>
</li>
<li>
<p>面向对象高级编程</p>
<div class="paragraph">
<p>（略）</p>
</div>
</li>
<li>
<p>错误、调试和测试</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>错误处理</p>
<div class="olist lowerroman">
<ol class="lowerroman" type="i">
<li>
<p>错误处理</p>
<div class="olist upperalpha">
<ol class="upperalpha" type="A">
<li>
<p>如果先捕获父类异常，子类异常将无法捕获。</p>
</li>
<li>
<p>Python 3 内建 Exception 层次结构如下：</p>
<div class="listingblock">
<div class="content">
<pre>BaseException
 +-- SystemExit
 +-- KeyboardInterrupt
 +-- GeneratorExit
 +-- Exception
      +-- StopIteration
      +-- StopAsyncIteration
      +-- ArithmeticError
      |    +-- FloatingPointError
      |    +-- OverflowError
      |    +-- ZeroDivisionError
      +-- AssertionError
      +-- AttributeError
      +-- BufferError
      +-- EOFError
      +-- ImportError
           +-- ModuleNotFoundError
      +-- LookupError
      |    +-- IndexError
      |    +-- KeyError
      +-- MemoryError
      +-- NameError
      |    +-- UnboundLocalError
      +-- OSError
      |    +-- BlockingIOError
      |    +-- ChildProcessError
      |    +-- ConnectionError
      |    |    +-- BrokenPipeError
      |    |    +-- ConnectionAbortedError
      |    |    +-- ConnectionRefusedError
      |    |    +-- ConnectionResetError
      |    +-- FileExistsError
      |    +-- FileNotFoundError
      |    +-- InterruptedError
      |    +-- IsADirectoryError
      |    +-- NotADirectoryError
      |    +-- PermissionError
      |    +-- ProcessLookupError
      |    +-- TimeoutError
      +-- ReferenceError
      +-- RuntimeError
      |    +-- NotImplementedError
      |    +-- RecursionError
      +-- SyntaxError
      |    +-- IndentationError
      |         +-- TabError
      +-- SystemError
      +-- TypeError
      +-- ValueError
      |    +-- UnicodeError
      |         +-- UnicodeDecodeError
      |         +-- UnicodeEncodeError
      |         +-- UnicodeTranslateError
      +-- Warning
           +-- DeprecationWarning
           +-- PendingDeprecationWarning
           +-- RuntimeWarning
           +-- SyntaxWarning
           +-- UserWarning
           +-- FutureWarning
           +-- ImportWarning
           +-- UnicodeWarning
           +-- BytesWarning
           +-- ResourceWarning</pre>
</div>
</div>
</li>
<li>
<p>使用try&#8230;&#8203;except捕获错误可以跨越多层调用，不需要在每个可能出错的地方去捕获错误，只要在合适的层次去捕获就可以了。</p>
</li>
</ol>
</div>
</li>
<li>
<p>调用堆栈</p>
<div class="paragraph">
<p>如果错误没有被捕获，它就会一直往上抛，最后被Python解释器捕获，打印一个错误信息，然后程序退出。</p>
</div>
</li>
<li>
<p>记录错误</p>
<div class="paragraph">
<p>内置logging模块</p>
</div>
</li>
<li>
<p>抛出错误</p>
<div class="paragraph">
<p>raise语句如果不带参数，就会把当前错误原样抛出。</p>
</div>
</li>
</ol>
</div>
</li>
<li>
<p>调试</p>
<div class="olist lowerroman">
<ol class="lowerroman" type="i">
<li>
<p>调试</p>
<div class="paragraph">
<p>直接使用 print() 打印可能有问题的变量</p>
</div>
</li>
<li>
<p>断言</p>
<div class="paragraph">
<p>如果断言失败，assert语句本身就会抛出AssertionError。
启动Python解释器时可以用 -O 参数来关闭assert。</p>
</div>
</li>
<li>
<p>logging</p>
<div class="listingblock">
<div class="content">
<pre>import logging
logging.basicConfig(level=logging.INFO)</pre>
</div>
</div>
<div class="olist upperalpha">
<ol class="upperalpha" type="A">
<li>
<p>允许指定记录信息的级别，有debug，info，warning，error等几个级别。</p>
</li>
<li>
<p>通过简单的配置，一条语句可以同时输出到不同的地方，比如console和文件。</p>
</li>
</ol>
</div>
</li>
<li>
<p>pdb</p>
<div class="listingblock">
<div class="content">
<pre>// 以参数-m pdb启动，单步执行
python3 -m pdb err.py</pre>
</div>
</div>
<div class="olist upperalpha">
<ol class="upperalpha" type="A">
<li>
<p>l ：查看代码</p>
</li>
<li>
<p>n ：单步执行</p>
</li>
<li>
<p>p 变量名 ：查看变量</p>
</li>
<li>
<p>q ：结束调试</p>
</li>
</ol>
</div>
</li>
<li>
<p>pdb.set_trace()</p>
<div class="paragraph">
<p>不需要单步执行，只需import pdb，在可能出错的地方放置pdb.set_trace()，就可以设置断点。</p>
</div>
</li>
<li>
<p>IDE</p>
</li>
</ol>
</div>
</li>
<li>
<p>单元测试</p>
<div class="olist lowerroman">
<ol class="lowerroman" type="i">
<li>
<p>Python自带unittest模块，举例如下：</p>
<div class="olist upperalpha">
<ol class="upperalpha" type="A">
<li>
<p>mydict.py</p>
<div class="listingblock">
<div class="content">
<pre>class Dict(dict):
    def __init__(self, **kw):
        super().__init__(**kw)

    def __getattr__(self, key):
        try:
            return self[key]
        except KeyError:
            raise AttributeError(r"'Dict' object has no attribute '%s'" % key)

    def __setattr__(self, key, value):
        self[key] = value</pre>
</div>
</div>
</li>
<li>
<p>mydict_test.py</p>
<div class="listingblock">
<div class="content">
<pre>import unittest

from mydict import Dict


class TestDict(unittest.TestCase):
    def test_init(self):
        d = Dict(a=1, b='test')
        self.assertEqual(d.a, 1)
        self.assertEqual(d.b, 'test')
        self.assertTrue(isinstance(d, dict))

    def test_key(self):
        d = Dict()
        d['key'] = 'value'
        self.assertEqual(d.key, 'value')

    def test_attr(self):
        d = Dict()
        d.key = 'value'
        self.assertTrue('key' in d)
        self.assertEqual(d['key'], 'value')

    def test_keyerror(self):
        d = Dict()
        with self.assertRaises(KeyError):
            value = d['empty']

    def test_attrerror(self):
        d = Dict()
        with self.assertRaises(AttributeError):
            value = d.empty


if __name__ == '__main__':
    unittest.main()</pre>
</div>
</div>
</li>
</ol>
</div>
</li>
<li>
<p>setUp()和tearDown()</p>
<div class="olist upperalpha">
<ol class="upperalpha" type="A">
<li>
<p>这两个方法会分别在每调用一个测试方法的前后分别被执行。</p>
</li>
<li>
<p>设想测试需要启动一个数据库，这时就可以在setUp()中连接数据库，在tearDown()中关闭数据库，这样不必在每个测试方法中重复相同的代码。</p>
</li>
</ol>
</div>
</li>
</ol>
</div>
</li>
<li>
<p>文档测试</p>
<div class="paragraph">
<p>Python内置的“文档测试”（doctest）模块可以直接提取注释中的代码并执行测试。</p>
</div>
<div class="paragraph">
<p>以下示例无输出，说明doctest都是正确的。如果有问题，比如把<em>getattr</em>()方法注释掉，再运行就会报错。</p>
</div>
<div class="listingblock">
<div class="content">
<pre>class Dict(dict):
    '''
    Simple dict but also support access as x.y style.

    &gt;&gt;&gt; d1 = Dict()
    &gt;&gt;&gt; d1['x'] = 100
    &gt;&gt;&gt; d1.x
    100
    &gt;&gt;&gt; d1.y = 200
    &gt;&gt;&gt; d1['y']
    200
    &gt;&gt;&gt; d2 = Dict(a=1, b=2, c='3')
    &gt;&gt;&gt; d2.c
    '3'
    &gt;&gt;&gt; d2['empty']
    Traceback (most recent call last):
        ...
    KeyError: 'empty'
    &gt;&gt;&gt; d2.empty
    Traceback (most recent call last):
        ...
    AttributeError: 'Dict' object has no attribute 'empty'
    '''
    def __init__(self, **kw):
        super(Dict, self).__init__(**kw)

    def __getattr__(self, key):
        try:
            return self[key]
        except KeyError:
            raise AttributeError(r"'Dict' object has no attribute '%s'" % key)

    def __setattr__(self, key, value):
        self[key] = value

if __name__=='__main__':
    import doctest
    doctest.testmod()</pre>
</div>
</div>
</li>
</ol>
</div>
</li>
<li>
<p>IO编程</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>文件读写</p>
<div class="olist lowerroman">
<ol class="lowerroman" type="i">
<li>
<p>读文件</p>
<div class="listingblock">
<div class="content">
<pre>f = open('/Users/michael/test.txt', 'r')
f.read()
f.close()</pre>
</div>
</div>
<div class="paragraph">
<p>标示符&#8217;r&#8217;表示读，如果文件不存在，open()函数就会抛出一个IOError的错误。
如果文件打开成功，接下来调用read()方法可以一次读取文件的全部内容。</p>
</div>
<div class="listingblock">
<div class="content">
<pre>with open('/path/to/file', 'r') as f:
    print(f.read())</pre>
</div>
</div>
<div class="olist upperalpha">
<ol class="upperalpha" type="A">
<li>
<p>调用read()会一次性读取文件的全部内容，可反复调用read(size)方法，每次最多读取size个字节的内容。</p>
</li>
<li>
<p>调用readline()可以每次读取一行内容。</p>
</li>
<li>
<p>调用readlines()一次读取所有内容并按行返回list。</p>
</li>
</ol>
</div>
</li>
<li>
<p>file-like Object</p>
<div class="olist upperalpha">
<ol class="upperalpha" type="A">
<li>
<p>像open()函数返回的这种有个read()方法的对象，在Python中统称为file-like Object。</p>
</li>
<li>
<p>file-like Object不要求从特定类继承，只要写个read()方法就行。</p>
</li>
<li>
<p>StringIO就是在内存中创建的file-like Object，常用作临时缓冲。</p>
</li>
</ol>
</div>
</li>
<li>
<p>二进制文件
要读取二进制文件，比如图片、视频等等，用&#8217;rb&#8217;模式打开文件即可：</p>
<div class="listingblock">
<div class="content">
<pre>&gt;&gt;&gt; f = open('/Users/michael/test.jpg', 'rb')
&gt;&gt;&gt; f.read()
b'\xff\xd8\xff\xe1\x00\x18Exif\x00\x00...' # 十六进制表示的字节</pre>
</div>
</div>
</li>
<li>
<p>字符编码
要读取非UTF-8编码的文本文件，需要给open()函数传入encoding参数，例如，读取GBK编码的文件：</p>
<div class="listingblock">
<div class="content">
<pre>&gt;&gt;&gt; f = open('/Users/michael/gbk.txt', 'r', encoding='gbk')
&gt;&gt;&gt; f.read()
'测试'</pre>
</div>
</div>
<div class="paragraph">
<p>遇到编码不规范的文件，open()函数还接收一个errors参数，表示如果遇到编码错误后如何处理。最简单的方式是直接忽略：</p>
</div>
<div class="listingblock">
<div class="content">
<pre>f = open('/Users/michael/gbk.txt', 'r', encoding='gbk', errors='ignore')</pre>
</div>
</div>
</li>
<li>
<p>写文件
调用open()函数时，传入标识符&#8217;w&#8217;或者&#8217;wb&#8217;表示写文本文件或写二进制文件：</p>
<div class="listingblock">
<div class="content">
<pre>&gt;&gt;&gt; f = open('/Users/michael/test.txt', 'w')
&gt;&gt;&gt; f.write('Hello, world!')
&gt;&gt;&gt; f.close()</pre>
</div>
</div>
<div class="paragraph">
<p>操作系统往往不会立刻把数据写入磁盘，而是放到内存缓存起来，只有调用close()方法时，操作系统才保证把没有写入的数据全部写入磁盘。</p>
</div>
<div class="listingblock">
<div class="content">
<pre>with open('/Users/michael/test.txt', 'w') as f:
    f.write('Hello, world!')</pre>
</div>
</div>
<div class="paragraph">
<p>要写入特定编码的文本文件，需传入encoding参数。</p>
</div>
</li>
</ol>
</div>
</li>
<li>
<p>StringIO 和 BytesIO</p>
<div class="paragraph">
<p>（略）</p>
</div>
</li>
<li>
<p>操作文件和目录</p>
<div class="olist lowerroman">
<ol class="lowerroman" type="i">
<li>
<p>Python内置的os模块可以直接调用操作系统提供的接口函数。一部分在os模块中，另一部分在os.path模块中。</p>
<div class="listingblock">
<div class="content">
<pre>&gt;&gt;&gt; import os
&gt;&gt;&gt; os.name
&gt;&gt;&gt; os.environ
&gt;&gt;&gt; os.environ.get('key')

# 查看当前目录的绝对路径:
&gt;&gt;&gt; os.path.abspath('.')
'/Users/michael'
# 在某个目录下创建一个新目录，首先把新目录的完整路径表示出来:
&gt;&gt;&gt; os.path.join('/Users/michael', 'testdir')
'/Users/michael/testdir'
# 然后创建一个目录:
&gt;&gt;&gt; os.mkdir('/Users/michael/testdir')
# 删掉一个目录:
&gt;&gt;&gt; os.rmdir('/Users/michael/testdir')</pre>
</div>
</div>
</li>
<li>
<p>把两个路径合成一个时，不要直接拼字符串，而要通过os.path.join()函数，这样可以正确处理不同操作系统的路径分隔符。
要拆分路径时，同理，要用os.path.split()函数。</p>
<div class="listingblock">
<div class="content">
<pre>&gt;&gt;&gt; os.path.split('/Users/michael/testdir/file.txt')
('/Users/michael/testdir', 'file.txt')</pre>
</div>
</div>
</li>
<li>
<p>os.path.splitext()可以直接得到文件扩展名：</p>
<div class="listingblock">
<div class="content">
<pre>&gt;&gt;&gt; os.path.splitext('/path/to/file.txt')
('/path/to/file', '.txt')</pre>
</div>
</div>
<div class="paragraph">
<p>这些合并、拆分路径的函数并不要求目录和文件要真实存在，它们只对字符串进行操作。</p>
</div>
</li>
<li>
<p>重命名和删除</p>
<div class="listingblock">
<div class="content">
<pre># 对文件重命名:
&gt;&gt;&gt; os.rename('test.txt', 'test.py')
# 删掉文件:
&gt;&gt;&gt; os.remove('test.py')</pre>
</div>
</div>
</li>
<li>
<p>复制
复制文件的函数在os模块中不存在！原因是复制文件并非由操作系统提供的系统调用。</p>
</li>
<li>
<p>shutil模块提供了copyfile()的函数，shutil模块中有很多实用函数，可以看做是os模块的补充。</p>
</li>
<li>
<p>过滤文件</p>
<div class="listingblock">
<div class="content">
<pre># 列出当前目录下的所有目录
&gt;&gt;&gt; [x for x in os.listdir('.') if os.path.isdir(x)]
['.lein', '.local', '.m2', '.npm', '.ssh', '.Trash', '.vim', 'Applications', 'Desktop', ...]

# 列出所有的.py文件
&gt;&gt;&gt; [x for x in os.listdir('.') if os.path.isfile(x) and os.path.splitext(x)[1]=='.py']
['apis.py', 'config.py', 'models.py', 'pymonitor.py', 'test_db.py', 'urls.py', 'wsgiapp.py']</pre>
</div>
</div>
</li>
</ol>
</div>
</li>
<li>
<p>序列化</p>
<div class="olist lowerroman">
<ol class="lowerroman" type="i">
<li>
<p>Pickle</p>
<div class="olist upperalpha">
<ol class="upperalpha" type="A">
<li>
<p>序列化在Python中叫pickling(腌渍)，在其他语言中也被称之为serialization，marshalling，flattening等等。</p>
<div class="listingblock">
<div class="content">
<pre>&gt;&gt;&gt; import pickle
&gt;&gt;&gt; d = dict(name='Bob', age=20, score=88)
&gt;&gt;&gt; pickle.dumps(d)
b'\x80\x03}q\x00(X\x03\x00\x00\x00ageq\x01K\x14X\x05\x00\x00\x00scoreq\x02KXX\x04\x00\x00\x00nameq\x03X\x03\x00\x00\x00Bobq\x04u.'

&gt;&gt;&gt; f = open('dump.txt', 'wb')
&gt;&gt;&gt; pickle.dump(d, f)
&gt;&gt;&gt; f.close()</pre>
</div>
</div>
</li>
<li>
<p>反序列化为unpickling。</p>
<div class="listingblock">
<div class="content">
<pre>&gt;&gt;&gt; f = open('dump.txt', 'rb')
&gt;&gt;&gt; d = pickle.load(f)
&gt;&gt;&gt; f.close()
&gt;&gt;&gt; d
{'age': 20, 'score': 88, 'name': 'Bob'}</pre>
</div>
</div>
</li>
<li>
<p>Pickle只能用于Python，且不同版本可能彼此不兼容，因此只能用Pickle保存那些不重要的数据。</p>
</li>
</ol>
</div>
</li>
<li>
<p>JSON
要在不同的编程语言之间传递对象，就必须把对象序列化为标准格式，比如XML，但更好的方法是序列化为JSON。</p>
<div class="olist upperalpha">
<ol class="upperalpha" type="A">
<li>
<p>类型对照表</p>
<table class="tableblock frame-all grid-all fit-content">
<colgroup>
<col>
<col>
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">JSON类型</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Python类型</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">{}</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">dict</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">[]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">list</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">"string"</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">str</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">1234.56</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">int或float</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">true/false</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">True/False</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">null</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">None</p></td>
</tr>
</tbody>
</table>
</li>
<li>
<p>把Python对象变成一个JSON：</p>
<div class="listingblock">
<div class="content">
<pre>&gt;&gt;&gt; import json
&gt;&gt;&gt; d = dict(name='Bob', age=20, score=88)
&gt;&gt;&gt; json.dumps(d)
'{"age": 20, "score": 88, "name": "Bob"}'</pre>
</div>
</div>
</li>
<li>
<p>把JSON反序列化为Python对象</p>
<div class="listingblock">
<div class="content">
<pre>&gt;&gt;&gt; json_str = '{"age": 20, "score": 88, "name": "Bob"}'
&gt;&gt;&gt; json.loads(json_str)
{'age': 20, 'score': 88, 'name': 'Bob'}</pre>
</div>
</div>
</li>
<li>
<p>JSON标准规定JSON编码是UTF-8</p>
</li>
<li>
<p>把类class序列化为JSON：</p>
<div class="listingblock">
<div class="content">
<pre>import json

class Student(object):
    def __init__(self, name, age, score):
        self.name = name
        self.age = age
        self.score = score

def student2dict(std):
    return {
        'name': std.name,
        'age': std.age,
        'score': std.score
    }

s = Student('Bob', 20, 88)
print(json.dumps(s, default=student2dict))</pre>
</div>
</div>
<div class="paragraph">
<p>上面的方法如果换一个类的实例，将无法序列化为JSON。把任意class的实例变为dict可用如下方法：</p>
</div>
<div class="listingblock">
<div class="content">
<pre># 因为通常class的实例都有一个__dict__属性，它就是一个dict
print(json.dumps(s, default=lambda obj: obj.__dict__))</pre>
</div>
</div>
</li>
<li>
<p>把JSON反序列化为一个类的对象实例，使用loads()方法：</p>
<div class="listingblock">
<div class="content">
<pre>def dict2student(d):
    return Student(d['name'], d['age'], d['score'])

json_str = '{"age": 20, "score": 88, "name": "Bob"}'
print(json.loads(json_str, object_hook=dict2student))</pre>
</div>
</div>
</li>
</ol>
</div>
</li>
</ol>
</div>
</li>
</ol>
</div>
</li>
<li>
<p>进程和线程</p>
<div class="paragraph">
<p>（略）</p>
</div>
</li>
<li>
<p>正则表达式</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>基础</p>
<div class="listingblock">
<div class="content">
<pre>\d      # 一个数字
\w      # 一个字母或数字
.       # 任意字符
*       # 任意个字符（包括0个）
+       # 至少一个字符
?       # 0个或1个字符
{n}     # n个字符
{n,m}   # n-m个字符</pre>
</div>
</div>
</li>
<li>
<p>进阶</p>
<div class="listingblock">
<div class="content">
<pre>[]      # 范围
[0-9a-zA-Z\_]   # 匹配一个数字、字母或者下划线

A|B     # 匹配A或B
(P|p)ython  # 可以匹配'Python'或者'python'

^       # 行的开头
^\d     # 必须以数字开头

$       # 行的结束
\d$     # 表示必须以数字结束</pre>
</div>
</div>
</li>
<li>
<p>re模块</p>
<div class="paragraph">
<p>match()方法判断是否匹配，如果匹配成功，返回一个Match对象，否则返回None。</p>
</div>
</li>
<li>
<p>切分字符串</p>
<div class="listingblock">
<div class="content">
<pre>&gt;&gt;&gt; 'a b   c'.split(' ')
['a', 'b', '', '', 'c']

&gt;&gt;&gt; re.split(r'\s+', 'a b   c')
['a', 'b', 'c']

&gt;&gt;&gt; re.split(r'[\s\,\;]+', 'a,b;; c  d')
['a', 'b', 'c', 'd']</pre>
</div>
</div>
</li>
<li>
<p>分组</p>
<div class="paragraph">
<p>用()表示要提取的分组（Group）：</p>
</div>
<div class="listingblock">
<div class="content">
<pre>&gt;&gt;&gt; m = re.match(r'^(\d{3})-(\d{3,8})$', '010-12345')
&gt;&gt;&gt; m
&lt;_sre.SRE_Match object; span=(0, 9), match='010-12345'&gt;
&gt;&gt;&gt; m.group(0)
'010-12345'
&gt;&gt;&gt; m.group(1)
'010'
&gt;&gt;&gt; m.group(2)
'12345'</pre>
</div>
</div>
<div class="paragraph">
<p>group(0)是原始字符串，group(1)、group(2)……表示第1、2、……个子串。</p>
</div>
</li>
<li>
<p>贪婪匹配</p>
<div class="paragraph">
<p>正则匹配默认是贪婪匹配，也就是匹配尽可能多的字符。举例如下，匹配出数字后面的0：</p>
</div>
<div class="listingblock">
<div class="content">
<pre>&gt;&gt;&gt; re.match(r'^(\d+)(0*)$', '1002300').groups()
('1002300', '')</pre>
</div>
</div>
<div class="paragraph">
<p>加个?就可以让\d+采用非贪婪匹配：</p>
</div>
<div class="listingblock">
<div class="content">
<pre>&gt;&gt;&gt; re.match(r'^(\d+?)(0*)$', '1002300').groups()
('10023', '00')</pre>
</div>
</div>
</li>
<li>
<p>编译</p>
<div class="olist lowerroman">
<ol class="lowerroman" type="i">
<li>
<p>在Python中使用正则表达式时，re模块内部会干两件事情：</p>
<div class="olist upperalpha">
<ol class="upperalpha" type="A">
<li>
<p>编译正则表达式，如果正则表达式的字符串本身不合法，会报错；</p>
</li>
<li>
<p>用编译后的正则表达式去匹配字符串。</p>
</li>
</ol>
</div>
</li>
<li>
<p>如果一个正则表达式要重复使用几千次，出于效率考虑，可以预编译该表达式：</p>
<div class="listingblock">
<div class="content">
<pre>&gt;&gt;&gt; import re
# 编译:
&gt;&gt;&gt; re_telephone = re.compile(r'^(\d{3})-(\d{3,8})$')
# 使用：
&gt;&gt;&gt; re_telephone.match('010-12345').groups()
('010', '12345')
&gt;&gt;&gt; re_telephone.match('010-8086').groups()
('010', '8086')</pre>
</div>
</div>
</li>
</ol>
</div>
</li>
</ol>
</div>
</li>
<li>
<p>常用内建模块</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>datetime</p>
</li>
<li>
<p>collections</p>
</li>
<li>
<p>base64</p>
</li>
<li>
<p>struct</p>
</li>
<li>
<p>hashlib</p>
</li>
<li>
<p>itertools</p>
</li>
<li>
<p>contextlib</p>
</li>
<li>
<p>XML</p>
</li>
<li>
<p>HTMLParser</p>
</li>
<li>
<p>urllib</p>
</li>
</ol>
</div>
</li>
<li>
<p>常用第三方模块</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>PIL</p>
</li>
</ol>
</div>
</li>
<li>
<p>virtualenv</p>
</li>
<li>
<p>图形界面</p>
<div class="paragraph">
<p>（略）</p>
</div>
</li>
<li>
<p>网络编程</p>
<div class="paragraph">
<p>（略）</p>
</div>
</li>
<li>
<p>电子邮件</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>SMTP发送邮件</p>
<div class="paragraph">
<p>示例代码：</p>
</div>
<div class="listingblock">
<div class="content">
<pre># coding=UTF-8


from email import encoders
from email.header import Header
from email.mime.base import MIMEBase
from email.mime.multipart import MIMEMultipart
from email.mime.text import MIMEText
from email.utils import parseaddr, formataddr

import smtplib

def _format_addr(s):
    name, addr = parseaddr(s)
    return formataddr((Header(name, 'utf-8').encode(), addr))

from_addr = input('From: ')
password = input('Password: ')
to_addr = input('To: ')
smtp_server = input('SMTP server: ')

# 邮件对象:
msg = MIMEMultipart()
msg['From'] = _format_addr('Python爱好者 &lt;%s&gt;' % from_addr)
msg['To'] = _format_addr('管理员 &lt;%s&gt;' % to_addr)
msg['Subject'] = Header('来自SMTP的问候……', 'utf-8').encode()

# 邮件正文是MIMEText:
# msg.attach(MIMEText('send with file...', 'plain', 'utf-8'))
msg.attach(MIMEText('&lt;html&gt;&lt;body&gt;&lt;h1&gt;Hello&lt;/h1&gt;' +
    '&lt;p&gt;&lt;img src="cid:0"&gt;&lt;/p&gt;' +
    '&lt;/body&gt;&lt;/html&gt;', 'html', 'utf-8'))

# 添加附件就是加上一个MIMEBase，从本地读取一个图片:
with open(r'C:\png-0002.jpg', 'rb') as f:
    # 设置附件的MIME和文件名，这里是png类型:
    mime = MIMEBase('image', 'png', filename='test.png')
    # 加上必要的头信息:
    mime.add_header('Content-Disposition', 'attachment', filename='test.png')
    mime.add_header('Content-ID', '&lt;0&gt;')
    mime.add_header('X-Attachment-Id', '0')
    # 把附件的内容读进来:
    mime.set_payload(f.read())
    # 用Base64编码:
    encoders.encode_base64(mime)
    # 添加到MIMEMultipart:
    msg.attach(mime)

server = smtplib.SMTP(smtp_server, 25)
server.set_debuglevel(1)
# server.login(from_addr, password)
server.sendmail(from_addr, [to_addr], msg.as_string())
server.quit()</pre>
</div>
</div>
<div class="paragraph">
<p>邮件对象的嵌套关系如下：</p>
</div>
<div class="listingblock">
<div class="content">
<pre>Message
+- MIMEBase
   +- MIMEMultipart
   +- MIMENonMultipart
      +- MIMEMessage
      +- MIMEText
      +- MIMEImage</pre>
</div>
</div>
</li>
<li>
<p>POP3收取邮件</p>
</li>
</ol>
</div>
</li>
<li>
<p>访问数据库</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>sqlite</p>
<div class="paragraph">
<p>Python内置了SQLite3。cursor示例：</p>
</div>
<div class="listingblock">
<div class="content">
<pre>cursor.execute('select * from user where name=? and pwd=?', ('abc', 'password'))</pre>
</div>
</div>
<div class="paragraph">
<p>要确保打开的Connection对象和Cursor对象都正确地被关闭，否则，资源就会泄露。</p>
</div>
</li>
<li>
<p>ORM框架SQLAlchemy</p>
</li>
</ol>
</div>
</li>
<li>
<p>Web开发</p>
<div class="paragraph">
<p>（略）</p>
</div>
</li>
<li>
<p>异步IO</p>
<div class="paragraph">
<p>（略）</p>
</div>
</li>
</ol>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Last updated 2020-03-19 16:46:27 UTC
</div>
</div>
<link rel="stylesheet" href="highlight/styles/monokai.min.css">
<script src="highlight/highlight.min.js"></script>
<script>hljs.initHighlighting()</script>
</body>
</html>